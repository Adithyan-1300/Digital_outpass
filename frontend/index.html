<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Pass | Institutional Outpass Portal</title>
    <link rel="stylesheet" href="css/index.css">
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- QR Scanner Library -->
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>

<body>
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-illustration" style="background: var(--primary-gradient);">
                <div class="logo-hero">
                    <img src="assets/images/logo.jpg" alt="VET Logo">
                    <h1 class="logo-text">Digital Pass</h1>
                    <p class="hero-description">
                        Digital Outpass Authorization System & Integrated Institutional Portal.
                    </p>
                </div>
            </div>

            <div class="login-form-side">
                <div class="login-box glass-panel">
                    <div class="mb-8">
                        <h2 class="login-title">Welcome Back</h2>
                        <p style="color: var(--text-muted); font-size: 15px;">Secure login to your institutional
                            workspace</p>
                    </div>

                    <form id="loginForm">
                        <div class="form-group">
                            <label
                                style="font-weight: 700; text-transform: uppercase; font-size: 12px; letter-spacing: 0.05em;">Username</label>
                            <input type="text" id="username" name="username" placeholder="Username or Enrollment No."
                                required
                                style="border-radius: 12px; padding: 14px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group">
                            <label
                                style="font-weight: 700; text-transform: uppercase; font-size: 12px; letter-spacing: 0.05em;">Password</label>
                            <div class="password-wrapper">
                                <input type="password" id="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required
                                    minlength="8"
                                    style="border-radius: 12px; padding: 14px; padding-right: 40px; background: #f8fafc; border: 1px solid #e2e8f0; width: 100%;">
                                <i class="ph ph-eye-slash password-toggle"></i>
                            </div>
                        </div>
                        <button type="submit" class="btn-modern btn-modern-primary">
                            <i class="ph ph-lock-key"></i> Authenticate Access
                        </button>
                        <div id="loginError" class="error-message"></div>
                        <div id="loginSuccess" class="success-message"></div>
                    </form>

                    <div class="mt-8 text-center" style="border-top: 1px solid #f1f5f9; padding-top: 24px;">
                        <p style="color: var(--text-muted); font-size: 14px;">New member? <a href="#" id="showRegister"
                                style="color: var(--primary); font-weight: 800; text-decoration: none;">Create Secure
                                Profile</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Registration Page -->
    <div id="registerPage" class="page">
        <div class="login-container">
            <div class="login-illustration" style="background: var(--primary-gradient);">
                <div class="logo-hero">
                    <img src="assets/images/logo.jpg" alt="VET Logo"
                        style="width: 100px; border-radius: 20px; margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.1);">
                    <h1 class="logo-text" style="font-size: 40px; margin-bottom: 12px; color: white;">Join Portal</h1>
                    <p style="font-size: 16px; opacity: 0.9; max-width: 360px; margin: 0 auto; color: white;">
                        <span id="regHeroText">Register your student profile to access institutional outpass
                            services.</span>
                    </p>
                </div>
            </div>

            <div class="login-form-side" style="height: 100vh; overflow-y: auto; padding: 40px; display: block;">
                <div class="login-box glass-panel"
                    style="background: white; border: none; max-width: 650px; padding: 48px; border-radius: 32px; box-shadow: var(--shadow-lg);">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h2 class="login-title" style="font-size: 28px;">Digital Onboarding</h2>
                            <p style="color: var(--text-muted); font-size: 14px;">Complete your institutional
                                registration</p>
                        </div>
                        <a href="#" id="showLoginTop" class="status-badge"
                            style="background: rgba(5, 150, 105, 0.08); text-decoration: none; color: var(--primary); font-weight: 700;">Login
                            Here</a>
                    </div>

                    <form id="registerForm" enctype="multipart/form-data">
                        <div class="form-group span-2">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Portal
                                Role</label>
                            <select id="regRole" name="role" required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0; font-weight: 600; color: var(--primary);">
                                <option value="student">Student (Outpass Access)</option>
                                <option value="staff">Staff (Advisor Panel)</option>
                                <option value="hod">HOD (Command Deck)</option>
                                <option value="security">Security (Gate Control)</option>
                                <option value="admin">Administrator (Full Control)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Full
                                Name</label>
                            <input type="text" name="full_name" placeholder="Name as per IDs" required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group" id="regNoGroup">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Registration
                                Number</label>
                            <input type="text" name="registration_no" placeholder="Enrollment Code" id="regNoInput"
                                required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group" id="deptGroup">
                            <label
                                style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Department</label>
                            <select id="regDept" name="dept_id" required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                                <option value="">Loading departments...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label
                                style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Username</label>
                            <input type="text" name="username" placeholder="Login identifier" required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Phone
                                Number</label>
                            <input type="tel" name="phone" placeholder="10-digit Mobile No" required maxlength="10"
                                minlength="10" pattern="\d{10}" title="Enter exactly 10 digits" id="regPhone"
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;"
                                id="regPhotoLabel">Student
                                Photo</label>
                            <input type="file" name="profile_image" accept="image/*" required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group" id="parentNameGroup">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Parent
                                Name</label>
                            <input type="text" name="parent_name" placeholder="Full name of parent" id="parentNameInput"
                                required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group" id="parentMobileGroup">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Parent
                                Mobile Number</label>
                            <input type="tel" name="parent_mobile" placeholder="10-digit Mobile No" maxlength="10"
                                minlength="10" pattern="\d{10}" title="Enter exactly 10 digits" id="parentMobileInput"
                                required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group" style="grid-column: span 2;" id="emailGroup">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;">College
                                Email</label>
                            <input type="email" name="email" placeholder="user@vetias.ac.in" id="regEmail" required
                                style="border-radius: 10px; padding: 12px; background: #f8fafc; border: 1px solid #e2e8f0;">
                        </div>
                        <div class="form-group">
                            <label
                                style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Password</label>
                            <div class="password-wrapper">
                                <input type="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required minlength="8"
                                    style="border-radius: 10px; padding: 12px; padding-right: 40px; background: #f8fafc; border: 1px solid #e2e8f0; width: 100%;">
                                <i class="ph ph-eye-slash password-toggle"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label style="font-weight: 700; text-transform: uppercase; font-size: 11px;">Confirm
                                Password</label>
                            <div class="password-wrapper">
                                <input type="password" name="confirm_password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required
                                    minlength="8"
                                    style="border-radius: 10px; padding: 12px; padding-right: 40px; background: #f8fafc; border: 1px solid #e2e8f0; width: 100%;">
                                <i class="ph ph-eye-slash password-toggle"></i>
                            </div>
                        </div>
                        <button type="submit" class="btn-modern btn-modern-primary span-2 mt-4">Create Account</button>
                        <div id="registerError" class="error-message span-2"></div>
                        <div id="registerSuccess" class="success-message span-2"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="page">
        <div class="dashboard-layout">
            <!-- Modern Sidebar -->
            <aside class="modern-sidebar">
                <div class="sidebar-logo">
                    <div class="logo-icon-mini">V</div>
                    <span class="logo-text">Digital Pass</span>
                </div>

                <button id="mobileMenuToggle" class="btn-modern"
                    style="width: auto; padding: 8px; background: transparent; box-shadow: none; display: flex; align-items: center; justify-content: center;">
                    <i class="ph ph-list" style="font-size: 24px; color: var(--text-main);"></i>
                </button>

                <nav class="sidebar-nav" id="sidebarNav">
                    <!-- Student Menu -->
                    <div id="studentMenu" style="display: none;">
                        <a href="#" class="nav-link active" data-module="student-dashboard">
                            <i class="ph ph-layout"></i> Workspace
                        </a>
                        <a href="#" class="nav-link" data-module="apply-outpass">
                            <i class="ph ph-plus-circle"></i> New Pass
                        </a>
                        <a href="#" class="nav-link" data-module="my-outpasses">
                            <i class="ph ph-list-checks"></i> Registry
                        </a>
                    </div>

                    <!-- Staff Menu -->
                    <div id="staffMenu" style="display: none;">
                        <a href="#" class="nav-link active" data-module="staff-dashboard">
                            <i class="ph ph-layout"></i> Workspace
                        </a>
                        <a href="#" class="nav-link" data-module="pending-requests">
                            <i class="ph ph-clock"></i> Authorizations
                        </a>
                        <a href="#" class="nav-link" data-module="my-students">
                            <i class="ph ph-users"></i> Students
                        </a>
                    </div>

                    <!-- HOD Menu -->
                    <div id="hodMenu" style="display: none;">
                        <a href="#" class="nav-link active" data-module="hod-dashboard">
                            <i class="ph ph-framer-logo"></i> Command Deck
                        </a>
                        <a href="#" class="nav-link" data-module="hod-approvals">
                            <i class="ph ph-shield-check"></i> Final Audit
                        </a>
                        <a href="#" class="nav-link" data-module="dept-statistics">
                            <i class="ph ph-presentation-chart"></i> Analytics
                        </a>
                        <a href="#" class="nav-link" data-module="all-outpasses">
                            <i class="ph ph-archive"></i> Archive
                        </a>
                    </div>

                    <!-- Security Menu -->
                    <div id="securityMenu" style="display: none;">
                        <a href="#" class="nav-link active" data-module="security-dashboard">
                            <i class="ph ph-shield"></i> Gate Control
                        </a>
                        <a href="#" class="nav-link" data-module="scan-qr">
                            <i class="ph ph-scan"></i> QR Verify
                        </a>
                        <a href="#" class="nav-link" data-module="students-out">
                            <i class="ph ph-user-list"></i> Track Outs
                        </a>
                        <a href="#" class="nav-link" data-module="recent-activity">
                            <i class="ph ph-list-bullets"></i> Traffic Logs
                        </a>
                    </div>

                    <!-- Admin Menu -->
                    <div id="adminMenu" style="display: none;">
                        <a href="#" class="nav-link active" data-module="admin-dashboard">
                            <i class="ph ph-gear"></i> System Core
                        </a>
                        <a href="#" class="nav-link" data-module="manage-users">
                            <i class="ph ph-users-square"></i> Users
                        </a>
                        <a href="#" class="nav-link" data-module="manage-departments">
                            <i class="ph ph-buildings"></i> Departments
                        </a>
                    </div>
                </nav>

                <div class="user-profile-mini" style="padding-top: 24px; border-top: 1px solid var(--glass-border);">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <div id="userAvatar"
                            style="width: 44px; height: 44px; border-radius: 12px; background: #e2e8f0; display: flex; align-items: center; justify-content: center; font-weight: 700; color: var(--primary);">
                            ðŸ‘¤</div>
                        <div>
                            <div id="userName"
                                style="font-weight: 700; color: var(--text-main); font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 140px;">
                                User Name</div>
                            <div id="userRole"
                                style="font-size: 11px; text-transform: uppercase; color: var(--text-muted); font-weight: 700; letter-spacing: 0.05em;">
                                Role</div>
                        </div>
                    </div>
                    <a href="#" id="logoutBtn" class="nav-link"
                        style="color: var(--error); background: rgba(239, 68, 68, 0.05);">
                        <i class="ph ph-sign-out"></i> Logout
                    </a>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                <div id="moduleContent">
                    <!-- Module content will be loaded here -->
                    <div class="loading">Initializing system secure context...</div>
                </div>
            </main>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div id="qrModal" class="modal">
        <div class="modal-content glass-panel">
            <span class="close">&times;</span>
            <div class="text-center mb-8">
                <h2 style="font-size: 24px; font-weight: 800; color: var(--text-main); margin-bottom: 8px;">Gate
                    Authorization Token</h2>
                <p style="color: var(--text-muted); font-size: 14px;">Present this QR code to the security officer at
                    the institutional gate.</p>
            </div>
            <div class="text-center mb-8">
                <div id="qrCodeDisplay" class="qr-container">
                    <!-- QR Code image will be inserted here -->
                </div>
            </div>
            <div class="text-center"
                style="background: #f8fafc; padding: 16px; border-radius: 12px; border: 1px solid #f1f5f9;">
                <p
                    style="font-size: 12px; color: var(--primary); font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em;">
                    Secure Digital Signature Verified</p>
            </div>
        </div>
    </div>

    <!-- Background Scripts -->
    <script src="js/app.js"></script>
    <script src="js/student.js"></script>
    <script src="js/staff.js"></script>
    <script src="js/hod.js"></script>
    <script src="js/security.js"></script>
    <script src="js/admin.js"></script>
</body>

</html>